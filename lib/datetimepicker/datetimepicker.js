!function(e){"use strict";"function"==typeof define&&define.amd?define(["angular","moment"],e):e(window.angular,window.moment)}(function(e,t){"use strict";e.module("ui.bootstrap.datetimepicker",[]).constant("dateTimePickerConfig",{dropdownSelector:null,minuteStep:5,minView:"minute",startView:"day"}).directive("datetimepicker",["$log","dateTimePickerConfig",function(a,r){function i(){this.dateValue=(new Date).getTime(),this.selectable=!0;var e=["dateValue","display","active","selectable","past","future"];for(var t in arguments[0])e.indexOf(t)>=0&&(this[t]=arguments[0][t])}var n=function(t){var r=["startView","minView","minuteStep","dropdownSelector"];for(var i in t)if(r.indexOf(i)<0)throw"invalid option: "+i;var n=["minute","hour","day","month","year"];if(n.indexOf(t.startView)<0)throw"invalid startView value: "+t.startView;if(n.indexOf(t.minView)<0)throw"invalid minView value: "+t.minView;if(n.indexOf(t.minView)>n.indexOf(t.startView))throw"startView must be greater than minView";if(!e.isNumber(t.minuteStep))throw"minuteStep must be numeric";if(t.minuteStep<=0||t.minuteStep>=60)throw"minuteStep must be greater than zero and less than 60";if(null!==t.dropdownSelector&&!e.isString(t.dropdownSelector))throw"dropdownSelector must be a string";null===t.dropdownSelector||"undefined"!=typeof jQuery&&"function"==typeof jQuery().dropdown||(a.error("Please DO NOT specify the dropdownSelector option unless you are using jQuery AND Bootstrap.js. Please include jQuery AND Bootstrap.js, or write code to close the dropdown in the on-set-time callback. \n\nThe dropdownSelector configuration option is being removed because it will not function properly."),delete t.dropdownSelector)};return{restrict:"E",require:"ngModel",template:'<div class="datetimepicker table-responsive"><table class="table table-striped">   <thead>       <tr>           <th class="left" data-ng-click="changeView(data.currentView, data.leftDate, $event)" data-ng-show="data.leftDate.selectable"><i class="glyphicon glyphicon-arrow-left"/></th>           <th class="switch f-size" valign="middle" colspan="5" data-ng-show="data.previousViewDate.selectable" data-ng-click="changeView(data.previousView, data.previousViewDate, $event)">{{ data.previousViewDate.display }}</th>           <th class="right" data-ng-click="changeView(data.currentView, data.rightDate, $event)" data-ng-show="data.rightDate.selectable"><i class="glyphicon glyphicon-arrow-right"/></th>       </tr>       <tr>           <th class="dow" data-ng-repeat="day in data.dayNames" >{{ day }}</th>       </tr>   </thead>   <tbody>       <tr data-ng-if="data.currentView !== \'day\'" >           <td colspan="7" >              <span    class="{{ data.currentView }}"                        data-ng-repeat="dateObject in data.dates"                         data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}"                        data-ng-click="changeView(data.nextView, dateObject, $event)">{{ dateObject.display }}</span>            </td>       </tr>       <tr data-ng-if="data.currentView === \'day\'" data-ng-repeat="week in data.weeks">           <td data-ng-repeat="dateObject in week.dates"                data-ng-click="changeView(data.nextView, dateObject, $event)"               class="day"                data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}" >{{ dateObject.display }}</td>       </tr>   </tbody></table></div>',scope:{onSetTime:"&",beforeRender:"&"},replace:!0,link:function(a,d,u,o){var l={};u.datetimepickerConfig&&(l=a.$parent.$eval(u.datetimepickerConfig));var s={};e.extend(s,r,l),n(s);var c=function(e){var a=10*parseInt(t.utc(e).year()/10,10);return t.utc(e).year(a).startOf("year")},w={year:function(e){for(var a=t.utc(e).startOf("year"),r=10*parseInt(a.year()/10,10),n=t.utc(c(e)).subtract(1,"year").startOf("year"),d=o.$modelValue?t(o.$modelValue).year():0,u={currentView:"year",nextView:"year"===s.minView?"setTime":"month",previousViewDate:new i({dateValue:null,display:r+"-"+(r+9)}),leftDate:new i({dateValue:t.utc(n).subtract(9,"year").valueOf()}),rightDate:new i({dateValue:t.utc(n).add(11,"year").valueOf()}),dates:[]},l=0;12>l;l+=1){var w=t.utc(n).add(l,"years"),f={dateValue:w.valueOf(),display:w.format("YYYY"),past:w.year()<r,future:w.year()>r+9,active:w.year()===d};u.dates.push(new i(f))}return u},month:function(e){for(var a=t.utc(e).startOf("year"),r=c(e),n=o.$modelValue?t(o.$modelValue).format("YYYY-MMM"):0,d={previousView:"year",currentView:"month",nextView:"month"===s.minView?"setTime":"day",previousViewDate:new i({dateValue:r.valueOf(),display:a.format("YYYY")}),leftDate:new i({dateValue:t.utc(a).subtract(1,"year").valueOf()}),rightDate:new i({dateValue:t.utc(a).add(1,"year").valueOf()}),dates:[]},u=0;12>u;u+=1){var l=t.utc(a).add(u,"months"),w={dateValue:l.valueOf(),display:l.format("MMM"),active:l.format("YYYY-MMM")===n};d.dates.push(new i(w))}return d},day:function(e){for(var a=t.utc(e),r=t.utc(a).startOf("month"),n=t.utc(a).startOf("year"),d=t.utc(a).endOf("month"),u=t.utc(r).subtract(Math.abs(r.weekday()),"days"),l=o.$modelValue?t(o.$modelValue).format("YYYY-MMM-DD"):"",c={previousView:"month",currentView:"day",nextView:"day"===s.minView?"setTime":"hour",previousViewDate:new i({dateValue:n.valueOf(),display:r.format("YYYY-MMM")}),leftDate:new i({dateValue:t.utc(r).subtract(1,"months").valueOf()}),rightDate:new i({dateValue:t.utc(r).add(1,"months").valueOf()}),dayNames:[],weeks:[]},w=0;7>w;w+=1)c.dayNames.push(t.utc().weekday(w).format("dd"));for(var f=0;6>f;f+=1){for(var m={dates:[]},V=0;7>V;V+=1){var p=t.utc(u).add(7*f+V,"days"),h={dateValue:p.valueOf(),display:p.format("D"),active:p.format("YYYY-MMM-DD")===l,past:p.isBefore(r),future:p.isAfter(d)};m.dates.push(new i(h))}c.weeks.push(m)}return c},hour:function(e){for(var a=t.utc(e).startOf("day"),r=t.utc(a).startOf("month"),n=o.$modelValue?t(o.$modelValue).format("YYYY-MM-DD H"):"",d={previousView:"day",currentView:"hour",nextView:"hour"===s.minView?"setTime":"minute",previousViewDate:new i({dateValue:r.valueOf(),display:a.format("ll")}),leftDate:new i({dateValue:t.utc(a).subtract(1,"days").valueOf()}),rightDate:new i({dateValue:t.utc(a).add(1,"days").valueOf()}),dates:[]},u=0;24>u;u+=1){var l=t.utc(a).add(u,"hours"),c={dateValue:l.valueOf(),display:l.format("LT"),active:l.format("YYYY-MM-DD H")===n};d.dates.push(new i(c))}return d},minute:function(e){for(var a=t.utc(e).startOf("hour"),r=t.utc(a).startOf("day"),n=o.$modelValue?t(o.$modelValue).format("YYYY-MM-DD H:mm"):"",d={previousView:"hour",currentView:"minute",nextView:"setTime",previousViewDate:new i({dateValue:r.valueOf(),display:a.format("lll")}),leftDate:new i({dateValue:t.utc(a).subtract(1,"hours").valueOf()}),rightDate:new i({dateValue:t.utc(a).add(1,"hours").valueOf()}),dates:[]},u=60/s.minuteStep,l=0;u>l;l+=1){var c=t.utc(a).add(l*s.minuteStep,"minute"),w={dateValue:c.valueOf(),display:c.format("LT"),active:c.format("YYYY-MM-DD H:mm")===n};d.dates.push(new i(w))}return d},setTime:function(e){var t=new Date(e),r=new Date(t.getTime()+6e4*t.getTimezoneOffset()),i=o.$modelValue;return o.$setViewValue(r),s.dropdownSelector&&jQuery(s.dropdownSelector).dropdown("toggle"),a.onSetTime({newDate:r,oldDate:i}),w[s.startView](e)}},f=function(e){var a=e?t(e).toDate():new Date;return a.getTime()-6e4*a.getTimezoneOffset()};a.changeView=function(e,t,r){if(r&&(r.stopPropagation(),r.preventDefault()),e&&t.dateValue>-(1/0)&&t.selectable&&w[e]){var i=w[e](t.dateValue),n=[];if(i.weeks)for(var d=0;d<i.weeks.length;d+=1)for(var u=i.weeks[d],o=0;o<u.dates.length;o+=1){var l=u.dates[o];n.push(l)}a.beforeRender({$view:i.currentView,$dates:i.dates||n,$leftDate:i.leftDate,$upDate:i.previousViewDate,$rightDate:i.rightDate}),a.data=i}},o.$render=function(e){if(e)var r=t(t.tz(t(o.$modelValue),e).format("YYYY-MM-DD HH:mm")).toDate();if(o.$viewValue&&e){var n=f(r);a.changeView("year",new i({dateValue:n})),a.changeView("month",new i({dateValue:n})),a.changeView("day",new i({dateValue:n})),a.changeView("hour",new i({dateValue:n})),a.changeView("minute",new i({dateValue:n})),a.changeView("setTime",new i({dateValue:n}))}else a.changeView(s.startView,new i({dateValue:f(r||o.$viewValue)}))}}}}])});