angular.module("ionicLazyLoad",[]),angular.module("ionicLazyLoad").directive("lazyScroll",["$rootScope","$timeout",function(e,a){return{restrict:"A",link:function(o,i){var n=0;o.invoke=function(){e.$broadcast("lazyScrollEvent")},i.bind("scroll",function(){a.cancel(n),n=a(o.invoke,0)})}}}]).directive("imageLazySrc",["$document","$timeout","$ionicScrollDelegate","$compile",function(e,a,o,i){return{restrict:"A",scope:{lazyScrollResize:"@lazyScrollResize",imageLazyBackgroundImage:"@imageLazyBackgroundImage"},link:function(n,t,r){function c(){if(t.bind("load",function(e){r.imageLazyLoader&&m.remove(),"true"==n.lazyScrollResize&&o.resize()}),"true"==n.imageLazyBackgroundImage){var e=new Image;e.onload=function(){r.imageLazyLoader&&m.remove(),t[0].style.backgroundImage="url("+r.imageLazySrc+")","true"==n.lazyScrollResize&&o.resize()},e.src=r.imageLazySrc}else t[0].src=r.imageLazySrc}function l(){var a=e[0].documentElement.clientHeight,o=e[0].documentElement.clientWidth,i=t[0].getBoundingClientRect();return i.top>=0&&i.top<=a+parseInt(r.imageLazyDistanceFromBottomToLoad)&&i.left>=0&&i.left<=o+parseInt(r.imageLazyDistanceFromRightToLoad)}if(r.imageLazyDistanceFromBottomToLoad||(r.imageLazyDistanceFromBottomToLoad=0),r.imageLazyDistanceFromRightToLoad||(r.imageLazyDistanceFromRightToLoad=0),r.imageLazyLoader){var m=i('<div class="image-loader-container"><ion-spinner class="image-loader" icon="'+r.imageLazyLoader+'"></ion-spinner></div>')(n);t.after(m)}var g=n.$on("lazyScrollEvent",function(){l()&&(c(),g())});t.on("$destroy",function(){g()}),a(function(){l()&&(c(),g())},500)}}}]);